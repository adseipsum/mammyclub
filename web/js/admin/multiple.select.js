(function(g,e,a){function c(h){if(!g("option:selected",h).length){alert("Please select at least one item");return 0}return 1}function d(h){if(!g("option",h).length){alert("Please select at least one item");return 0}return 1}function b(h){h.find("option:selected").removeAttr("selected")}function f(h){if(!d(h)){return}g("option",h).attr("selected","selected")}g.extend(g.fn,{multipleSelect:function(h){var i=g.data(this[0],"multipleSelect");if(i){return i}i=new g.multipleSelect(h,this[0]);g.multipleSelect.instances[g.multipleSelect.instances.length]=i;g.data(this[0],"multipleSelect",i);return i}});g.multipleSelect=function(i,h){this.settings=g.extend({},g.multipleSelect.defaults,i);this.container=g(h);this.init()};g.extend(g.multipleSelect,{instances:[],defaults:{},preSubmitForm:function(j){for(var h=0;h<g.multipleSelect.instances.length;h++){g.multipleSelect.instances[h].preSubmitForm(j)}return true},prototype:{init:function(){$this=this;var h=$this.container.find(".from_container select");var i=$this.container.find(".to_container select");$this.container.find(".moveright").click(function(){if(!c(h)){return}g("option:selected",h).each(function(){g(this).remove().appendTo(i)});return false});$this.container.find(".moveleft").click(function(){if(!d(i)||!c(i)){return}g("option:selected",i).each(function(){g(this).remove().appendTo(h)});return false});$this.container.find(".moveup").click(function(){if(!d(i)||!c(i)){return}g("option:selected",i).each(function(){g(this).insertBefore(g(this).prev())});return false});$this.container.find(".movedown").click(function(){if(!d(i)||!c(i)){return}var j=g("option:selected:last",i).next();g("option:selected",i).each(function(){g(this).insertAfter(j);j=g(j).next()});return false});$this.container.find(".topmost").click(function(){if(!d(i)||!c(i)){return}if(g("option:selected",i).attr("index")>g("option:first",i).attr("index")){g("option:selected",i).insertBefore(g("option:first",i))}return false});$this.container.find(".bottommost").click(function(){if(!d(i)||!c(i)){return}if(g("option:selected",i).attr("index")<g("option:last",i).attr("index")){g("option:selected",i).insertAfter(g("option:last",i))}return false});g(".selectall",$this.container).click(function(){f(g(this).parents(".select_container:first").find("select"));return false});g(".deselectall",$this.container).click(function(){b(g(this).parents(".select_container:first").find("select"));return false});return this},preSubmitForm:function(i){var h=this.container.find(".from_container select");var j=this.container.find(".to_container select");if(g("option",j).length>0){f(j)}else{g(i).append('<input type="hidden" name="'+j.attr("name")+'"/>')}return true},ascOrderFunction:function(){this.toSelectBox.sortOptions()},desOrderFunction:function(){this.toSelectBox.sortOptions(false)},destroy:function(){this.container.multipleSelect=null;this.container=null;this.toSelectBox=null;this.fromSelectBox=null}}});g(e).unload(function(){for(var h=0;h<g.multipleSelect.instances.length;h++){g.multipleSelect.instances[h].destroy()}})})(jQuery,window,document);