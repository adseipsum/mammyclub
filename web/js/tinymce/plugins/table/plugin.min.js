!function(G,k){function z(f,c){for(var g,d=[],a=0;a<f.length;++a){if(g=q[f[a]]||y(f[a]),!g){throw"module definition dependecy not found: "+f[a]}d.push(g)}c.apply(null,d)}function w(d,c,a){if("string"!=typeof d){throw"invalid module definition, module id must be defined and be a string"}if(c===k){throw"invalid module definition, dependencies must be specified"}if(a===k){throw"invalid module definition, definition function must be specified"}z(c,function(){q[d]=a.apply(null,arguments)})}function C(a){return !!q[a]}function y(c){for(var e=G,d=c.split(/[.\/]/),a=0;a<d.length;++a){if(!e[d[a]]){return}e=e[d[a]]}return e}function J(h){for(var f=0;f<h.length;f++){for(var e=G,g=h[f],d=g.split(/[.\/]/),c=0;c<d.length-1;++c){e[d[c]]===k&&(e[d[c]]={}),e=e[d[c]]}e[d[d.length-1]]=q[g]}}var q={},B="tinymce/tableplugin/TableGrid",I="tinymce/util/Tools",j="tinymce/Env",H="tinymce/tableplugin/Quirks",F="tinymce/util/VK",x="tinymce/tableplugin/CellSelection",A="tinymce/dom/TreeWalker",D="tinymce/tableplugin/Dialogs",E="tinymce/tableplugin/Plugin",b="tinymce/PluginManager";w(B,[I,j],function(d,f){function c(h,g){return parseInt(h.getAttribute(g)||1,10)}var a=d.each;return function(ai,at){function ad(){var g=0;af=[],ac=0,a(["thead","tbody","tfoot"],function(h){var l=t.select("> "+h+" tr",at);a(l,function(p,m){m+=g,a(t.select("> td, > th",p),function(M,N){var v,u,L,o;if(af[m]){for(;af[m][N];){N++}}for(L=c(M,"rowspan"),o=c(M,"colspan"),u=m;m+L>u;u++){for(af[u]||(af[u]=[]),v=N;N+o>v;v++){af[u][v]={part:h,real:u==m&&v==N,elm:M,rowspan:L,colspan:o}}}ac=Math.max(ac,N+1)})}),g+=l.length})}function ak(h,g){return h=h.cloneNode(g),h.removeAttribute("id"),h}function aq(h,g){var l;return l=af[g],l?l[h]:void 0}function aa(h,g,l){h&&(l=parseInt(l,10),1===l?h.removeAttribute(g,1):h.setAttribute(g,l,1))}function ap(g){return g&&(t.hasClass(g.elm,"mce-item-selected")||g==U)}function ao(){var g=[];return a(at.rows,function(h){a(h.cells,function(l){return t.hasClass(l,"mce-item-selected")||U&&l==U.elm?(g.push(h),!1):void 0})}),g}function ah(){var g=t.createRng();g.setStartAfter(at),g.setEndAfter(at),X.setRng(g),t.remove(at)}function aj(h){var l,g={};return ai.settings.table_clone_elements!==!1&&(g=d.makeMap((ai.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),d.walk(h,function(m){var p;return 3==m.nodeType?(a(t.getParents(m.parentNode,null,h).reverse(),function(o){g[o.nodeName]&&(o=ak(o,!1),l?p&&p.appendChild(o):l=p=o,p=o)}),p&&(p.innerHTML=f.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),h=ak(h,!1),aa(h,"rowSpan",1),aa(h,"colSpan",1),l?h.appendChild(l):(!f.ie||f.ie>10)&&(h.innerHTML='<br data-mce-bogus="1" />'),h}function am(){var h=t.createRng(),g;return a(t.select("tr",at),function(l){0===l.cells.length&&t.remove(l)}),0===t.select("tr",at).length?(h.setStartBefore(at),h.setEndBefore(at),X.setRng(h),void t.remove(at)):(a(t.select("thead,tbody,tfoot",at),function(l){0===l.rows.length&&t.remove(l)}),ad(),void (Q&&(g=af[Math.min(af.length-1,Q.y)],g&&(X.select(g[Math.min(g.length-1,Q.x)].elm,!0),X.collapse(!0)))))}function an(v,M,m,g){var u,h,L,N,p;for(u=af[M][v].elm.parentNode,L=1;m>=L;L++){if(u=t.getNext(u,"tr")){for(h=v;h>=0;h--){if(p=af[M+L][h].elm,p.parentNode==u){for(N=1;g>=N;N++){t.insertAfter(aj(p),p)}break}}if(-1==h){for(N=1;g>=N;N++){u.insertBefore(aj(u.cells[0]),u.cells[0])}}}}}function Z(){a(af,function(h,g){a(h,function(p,u){var m,s,l;if(ap(p)&&(p=p.elm,m=c(p,"colspan"),s=c(p,"rowspan"),m>1||s>1)){for(aa(p,"rowSpan",1),aa(p,"colSpan",1),l=0;m-1>l;l++){t.insertAfter(aj(p),p)}an(u,g,s-1,m)}})})}function V(aw,L,h){var v,av,N,P,u,M,O,S,R,s,T;if(aw?(v=K(aw),av=v.x,N=v.y,P=av+(L-1),u=N+(h-1)):(Q=r=null,a(af,function(l,g){a(l,function(m,o){ap(m)&&(Q||(Q={x:o,y:g}),r={x:o,y:g})})}),Q&&(av=Q.x,N=Q.y,P=r.x,u=r.y)),S=aq(av,N),R=aq(P,u),S&&R&&S.part==R.part){for(Z(),ad(),S=aq(av,N).elm,aa(S,"colSpan",P-av+1),aa(S,"rowSpan",u-N+1),O=N;u>=O;O++){for(M=av;P>=M;M++){af[O]&&af[O][M]&&(aw=af[O][M].elm,aw!=S&&(s=d.grep(aw.childNodes),a(s,function(g){S.appendChild(g)}),s.length&&(s=d.grep(S.childNodes),T=0,a(s,function(g){"BR"==g.nodeName&&t.getAttrib(g,"data-mce-bogus")&&T++<s.length-1&&S.removeChild(g)})),t.remove(aw)))}}am()}}function ar(N){var u,m,P,R,O,M,l,v,L;if(a(af,function(g,h){return a(g,function(o){return ap(o)&&(o=o.elm,O=o.parentNode,M=ak(O,!1),u=h,N)?!1:void 0}),N?!u:void 0}),u!==k){for(R=0;R<af[0].length;R++){if(af[u][R]&&(m=af[u][R].elm,m!=P)){if(N){if(u>0&&af[u-1][R]&&(v=af[u-1][R].elm,L=c(v,"rowSpan"),L>1)){aa(v,"rowSpan",L+1);continue}}else{if(L=c(m,"rowspan"),L>1){aa(m,"rowSpan",L+1);continue}}l=aj(m),aa(l,"colSpan",m.colSpan),M.appendChild(l),P=m}}M.hasChildNodes()&&(N?O.parentNode.insertBefore(M,O):t.insertAfter(M,O))}}function ae(h){var g,l;a(af,function(m){return a(m,function(p,o){return ap(p)&&(g=o,h)?!1:void 0}),h?!g:void 0}),a(af,function(u,L){var p,v,m;u[g]&&(p=u[g].elm,p!=l&&(m=c(p,"colspan"),v=c(p,"rowspan"),1==m?h?(p.parentNode.insertBefore(aj(p),p),an(g,L,v-1,m)):(t.insertAfter(aj(p),p),an(g,L,v-1,m)):aa(p,"colSpan",p.colSpan+1),l=p))})}function W(){var g=[];a(af,function(h){a(h,function(m,l){ap(m)&&-1===d.inArray(g,l)&&(a(af,function(p){var o=p[l].elm,s;s=c(o,"colSpan"),s>1?aa(o,"colSpan",s-1):t.remove(o)}),g.push(l))})}),am()}function Y(){function h(m){var l,o;a(m.cells,function(p){var s=c(p,"rowSpan");s>1&&(aa(p,"rowSpan",s-1),l=K(p),an(l.x,l.y,1,1))}),l=K(m.cells[0]),a(af[l.y],function(s){var p;s=s.elm,s!=o&&(p=c(s,"rowSpan"),1>=p?t.remove(s):aa(s,"rowSpan",p-1),o=s)})}var g;g=ao(),a(g.reverse(),function(l){h(l)}),am()}function au(){var g=ao();return t.remove(g),am(),g}function ab(){var g=ao();return a(g,function(h,l){g[l]=ak(h,!0)}),g}function al(l,g){var p=ao(),h=p[g?0:p.length-1],m=h.cells.length;l&&(a(af,function(s){var o;return m=0,a(s,function(u){u.real&&(m+=u.colspan),u.elm.parentNode==h&&(o=1)}),o?!1:void 0}),g||l.reverse(),a(l,function(u){var v,s=u.cells.length,o;for(v=0;s>v;v++){o=u.cells[v],aa(o,"colSpan",1),aa(o,"rowSpan",1)}for(v=s;m>v;v++){u.appendChild(aj(u.cells[s-1]))}for(v=m;s>v;v++){t.remove(u.cells[v])}g?h.parentNode.insertBefore(u,h):t.insertAfter(u,h)}),t.removeClass(t.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function K(h){var g;return a(af,function(m,l){return a(m,function(p,o){return p.elm==h?(g={x:o,y:l},!1):void 0}),!g}),g}function i(g){Q=K(g)}function e(){var h,g;return h=g=0,a(af,function(m,l){a(m,function(v,s){var u,p;ap(v)&&(v=af[l][s],s>h&&(h=s),l>g&&(g=l),v.real&&(u=v.colspan-1,p=v.rowspan-1,u&&s+u>h&&(h=s+u),p&&l+p>g&&(g=l+p)))})}),{x:h,y:g}}function n(L){var P,m,g,v,h,N,R,p,M,O;if(r=K(L),Q&&r){for(P=Math.min(Q.x,r.x),m=Math.min(Q.y,r.y),g=Math.max(Q.x,r.x),v=Math.max(Q.y,r.y),h=g,N=v,O=m;N>=O;O++){L=af[O][P],L.real||P-(L.colspan-1)<P&&(P-=L.colspan-1)}for(M=P;h>=M;M++){L=af[m][M],L.real||m-(L.rowspan-1)<m&&(m-=L.rowspan-1)}for(O=m;v>=O;O++){for(M=P;g>=M;M++){L=af[O][M],L.real&&(R=L.colspan-1,p=L.rowspan-1,R&&M+R>h&&(h=M+R),p&&O+p>N&&(N=O+p))}}for(t.removeClass(t.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),O=m;N>=O;O++){for(M=P;h>=M;M++){af[O][M]&&t.addClass(af[O][M].elm,"mce-item-selected")}}}}function ag(m,h){var o,l,g;o=K(m),l=o.y*ac+o.x;do{if(l+=h,g=aq(l%ac,Math.floor(l/ac)),!g){break}if(g.elm!=m){return X.select(g.elm,!0),t.isEmpty(g.elm)&&X.collapse(!0),!0}}while(g.elm==m);return !1}var af,ac,Q,r,U,X=ai.selection,t=X.dom;at=at||t.getParent(X.getStart(),"table"),ad(),U=t.getParent(X.getStart(),"th,td"),U&&(Q=K(U),r=e(),U=aq(Q.x,Q.y)),d.extend(this,{deleteTable:ah,split:Z,merge:V,insertRow:ar,insertCol:ae,deleteCols:W,deleteRows:Y,cutRows:au,copyRows:ab,pasteRows:al,getPos:K,setStartCell:i,setEndCell:n,moveRelIdx:ag,refresh:ad})}}),w(H,[F,j,I],function(f,c,g){function d(i,h){return parseInt(i.getAttribute(h)||1,10)}var a=g.each;return function(r){function m(){function l(Y){function L(ad,t){var ab=ad?"previousSibling":"nextSibling",aa=r.dom.getParent(t,"tr"),ag=aa[ab];if(ag){return P(r,t,ag,ad),Y.preventDefault(),!0}var af=r.dom.getParent(aa,"table"),ae=aa.parentNode,ac=ae.nodeName.toLowerCase();if("tbody"===ac||ac===(ad?"tfoot":"thead")){var v=V(ad,af,ae,"tbody");if(null!==v){return N(ad,v,t)}}return S(ad,aa,ab,af)}function V(ac,aa,ab,v){var ad=r.dom.select(">"+v,aa),u=ad.indexOf(ab);if(ac&&0===u||!ac&&u===ad.length-1){return Z(ac,aa)}if(-1===u){var s="thead"===ab.tagName.toLowerCase()?0:ad.length-1;return ad[s]}return ad[u+(ac?-1:1)]}function Z(v,s){var u=v?"thead":"tfoot",o=r.dom.select(">"+u,s);return 0!==o.length?o[0]:null}function N(u,t,s){var v=X(t,u);return v&&P(r,s,v,u),Y.preventDefault(),!0}function S(ab,aa,u,t){var v=t[u];if(v){return R(v),!0}var o=r.dom.getParent(t,"td,th");if(o){return L(ab,o,Y)}var ac=X(aa,!ab);return R(ac),Y.preventDefault(),!1}function X(u,o){var s=u&&u[o?"lastChild":"firstChild"];return s&&"BR"===s.nodeName?r.dom.getParent(s,"td,th"):s}function R(o){r.selection.setCursorLocation(o,0)}function Q(){return T==f.UP||T==f.DOWN}function K(s){var o=s.selection.getNode(),u=s.dom.getParent(o,"tr");return null!==u}function M(s){for(var o=0,u=s;u.previousSibling;){u=u.previousSibling,o+=d(u,"colspan")}return o}function O(u,s){var aa=0,v=0;return a(u.children,function(t,o){return aa+=d(t,"colspan"),v=o,aa>s?!1:void 0}),v}function P(ae,ab,ad,aa){var af=M(r.dom.getParent(ab,"td,th")),v=O(ad,af),ac=ad.childNodes[v],u=X(ac,aa);R(u||ac)}function W(v){var s=r.selection.getNode(),u=r.dom.getParent(s,"td,th"),o=r.dom.getParent(v,"td,th");return u&&u!==o&&U(u,o)}function U(s,o){return r.dom.getParent(s,"TABLE")===r.dom.getParent(o,"TABLE")}var T=Y.keyCode;if(Q()&&K(r)){var n=r.selection.getNode();setTimeout(function(){W(n)&&L(!Y.shiftKey&&T===f.UP,n,Y)},0)}}r.on("KeyDown",function(n){l(n)})}function h(){function l(v,s){var K=s.ownerDocument,u=K.createRange(),o;return u.setStartBefore(s),u.setEnd(v.endContainer,v.endOffset),o=K.createElement("body"),o.appendChild(u.cloneContents()),0===o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}r.on("KeyDown",function(s){var u,n,v=r.dom;(37==s.keyCode||38==s.keyCode)&&(u=r.selection.getRng(),n=v.getParent(u.startContainer,"table"),n&&r.getBody().firstChild==n&&l(u,n)&&(u=v.createRng(),u.setStartBefore(n),u.setEndBefore(n),r.selection.setRng(u),s.preventDefault()))})}function i(){r.on("KeyDown SetContent VisualAid",function(){var l;for(l=r.getBody().lastChild;l;l=l.previousSibling){if(3==l.nodeType){if(l.nodeValue.length>0){break}}else{if(1==l.nodeType&&("BR"==l.tagName||!l.getAttribute("data-mce-bogus"))){break}}}l&&"TABLE"==l.nodeName&&(r.settings.forced_root_block?r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,c.ie&&c.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):r.dom.add(r.getBody(),"br",{"data-mce-bogus":"1"}))}),r.on("PreProcess",function(n){var l=n.node.lastChild;l&&("BR"==l.nodeName||1==l.childNodes.length&&("BR"==l.firstChild.nodeName||"\xa0"==l.firstChild.nodeValue))&&l.previousSibling&&"TABLE"==l.previousSibling.nodeName&&r.dom.remove(l)})}function e(){function n(N,P,K,u){var M=3,v=N.dom.getParent(P.startContainer,"TABLE"),O,Q,L;return v&&(O=v.parentNode),Q=P.startContainer.nodeType==M&&0===P.startOffset&&0===P.endOffset&&u&&("TR"==K.nodeName||K==O),L=("TD"==K.nodeName||"TH"==K.nodeName)&&!u,Q||L}function l(){var u=r.selection.getRng(),v=r.selection.getNode(),s=r.dom.getParent(u.startContainer,"TD,TH");if(n(r,u,v,s)){s||(s=v);for(var K=s.lastChild;K.lastChild;){K=K.lastChild}3==K.nodeType&&(u.setEnd(K,K.data.length),r.selection.setRng(u))}}r.on("KeyDown",function(){l()}),r.on("MouseDown",function(o){2!=o.button&&l()})}function p(){r.on("keydown",function(n){if((n.keyCode==f.DELETE||n.keyCode==f.BACKSPACE)&&!n.isDefaultPrevented()){var s=r.dom.getParent(r.selection.getStart(),"table");if(s){for(var l=r.dom.select("td,th",s),u=l.length;u--;){if(!r.dom.hasClass(l[u],"mce-item-selected")){return}}n.preventDefault(),r.execCommand("mceTableDelete")}}})}p(),c.webkit&&(m(),e()),c.gecko&&(h(),i()),c.ie>10&&(h(),i())}}),w(x,[B,A,I],function(c,a,d){return function(e){function h(i){e.getBody().style.webkitUserSelect="",(i||t)&&(e.dom.removeClass(e.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),t=!1)}function f(r){var K,l,u=r.target;if(!m&&g&&(v||u!=g)&&("TD"==u.nodeName||"TH"==u.nodeName)){l=p.getParent(u,"table"),l==n&&(v||(v=new c(e,l),v.setStartCell(g),e.getBody().style.webkitUserSelect="none"),v.setEndCell(u),t=!0),K=e.selection.getSel();try{K.removeAllRanges?K.removeAllRanges():K.empty()}catch(s){}r.preventDefault()}}var p=e.dom,v,g,n,t=!0,m;return e.on("MouseDown",function(i){2==i.button||m||(h(),g=p.getParent(i.target,"td,th"),n=p.getParent(g,"table"))}),e.on("mouseover",f),e.on("remove",function(){p.unbind(e.getDoc(),"mouseover",f)}),e.on("MouseUp",function(){function L(u,i){var O=new a(u,u);do{if(3==u.nodeType&&0!==d.trim(u.nodeValue).length){return void (i?r.setStart(u,0):r.setEnd(u,u.nodeValue.length))}if("BR"==u.nodeName){return void (i?r.setStartBefore(u):r.setEndBefore(u))}}while(u=i?O.next():O.prev())}var r,N=e.selection,l,M,s,K;if(g){if(v&&(e.getBody().style.webkitUserSelect=""),l=p.select("td.mce-item-selected,th.mce-item-selected"),l.length>0){r=p.createRng(),s=l[0],r.setStartBefore(s),r.setEndAfter(s),L(s,1),M=new a(s,p.getParent(l[0],"table"));do{if("TD"==s.nodeName||"TH"==s.nodeName){if(!p.hasClass(s,"mce-item-selected")){break}K=s}}while(s=M.next());L(K),N.setRng(r)}e.nodeChanged(),g=v=n=null}}),e.on("KeyUp Drop SetContent",function(i){h("setcontent"==i.type),g=v=n=null,m=!1}),e.on("ObjectResizeStart ObjectResized",function(i){m="objectresized"!=i.type}),{clear:h}}}),w(D,[I,j],function(c,a){var d=c.each;return function(e){function n(){var i=this,f=e.settings.color_picker_callback;f&&f.call(e,function(l){i.value(l).fire("change")},i.value())}function h(f){return{title:"Advanced",type:"form",defaults:{onchange:function(){v(f,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:n},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:n}]}]}}function L(f){return f?f.replace(/px$/,""):""}function N(f){return/^[0-9]+$/.test(f)&&(f+="px"),f}function m(f){d("left center right".split(" "),function(i){e.formatter.remove("align"+i,{},f)})}function K(f){d("top middle bottom".split(" "),function(i){e.formatter.remove("valign"+i,{},f)})}function M(l,p,o){function f(i,s){return s=s||[],c.each(i,function(u){var r={text:u.text||u.title};u.menu?r.menu=f(u.menu):(r.value=u.value,p&&p(r)),s.push(r)}),s}return f(l,o||[])}function v(p,l,s){var o=l.toJSON(),f=p.parseStyle(o.style);s?(l.find("#borderColor").value(f["border-color"]||"")[0].fire("change"),l.find("#backgroundColor").value(f["background-color"]||"")[0].fire("change")):(f["border-color"]=o.borderColor,f["background-color"]=o.backgroundColor),l.find("#style").value(p.serializeStyle(p.parseStyle(p.serializeStyle(f))))}function t(l,f,o){var i=l.parseStyle(l.getAttrib(o,"style"));i["border-color"]&&(f.borderColor=i["border-color"]),i["background-color"]&&(f.backgroundColor=i["background-color"]),f.style=l.serializeStyle(i)}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(o){function u(){var i;v(f,this),P=c.extend(P,this.toJSON()),c.each("backgroundColor borderColor".split(" "),function(p){delete P[p]}),P["class"]===!1&&delete P["class"],e.undoManager.transact(function(){l||(l=e.plugins.table.insertTable(P.cols||1,P.rows||1)),e.dom.setAttribs(l,{cellspacing:P.cellspacing,cellpadding:P.cellpadding,border:P.border,style:P.style,"class":P["class"]}),e.dom.setStyles(l,{width:N(P.width),height:N(P.height)}),i=f.select("caption",l)[0],i&&!P.caption&&f.remove(i),!i&&P.caption&&(i=f.create("caption"),i.innerHTML=a.ie?"\xa0":'<br data-mce-bogus="1"/>',l.insertBefore(i,l.firstChild)),m(l),P.align&&e.formatter.apply("align"+P.align,{},l),e.focus(),e.addVisual()})}var f=e.dom,l,r,s,Q,P={},O;o===!0?(l=f.getParent(e.selection.getStart(),"table"),l&&(P={width:L(f.getStyle(l,"width")||f.getAttrib(l,"width")),height:L(f.getStyle(l,"height")||f.getAttrib(l,"height")),cellspacing:l?f.getAttrib(l,"cellspacing"):"",cellpadding:l?f.getAttrib(l,"cellpadding"):"",border:l?f.getAttrib(l,"border"):"",caption:!!f.select("caption",l)[0],"class":f.getAttrib(l,"class")},d("left center right".split(" "),function(i){e.formatter.matchNode(l,"align"+i)&&(P.align=i)}))):(r={label:"Cols",name:"cols"},s={label:"Rows",name:"rows"}),e.settings.table_class_list&&(P["class"]&&(P["class"]=P["class"].replace(/\s*mce\-item\-table\s*/g,"")),Q={name:"class",type:"listbox",label:"Class",values:M(e.settings.table_class_list,function(i){i.value&&(i.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[i.value]})})})}),O={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[r,s,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},Q]},e.settings.table_adv_tab!==!1?(t(f,P,l),e.windowManager.open({title:"Table properties",data:P,bodyType:"tabpanel",body:[{title:"General",type:"form",items:O},h(f)],onsubmit:u})):e.windowManager.open({title:"Table properties",data:P,body:O,onsubmit:u})},g.merge=function(i,f){e.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var l=this.toJSON();e.undoManager.transact(function(){i.merge(f,l.cols,l.rows)})}})},g.cell=function(){function r(){v(o,this),f=c.extend(f,this.toJSON()),e.undoManager.transact(function(){d(u,function(i){e.dom.setAttribs(i,{scope:f.scope,style:f.style,"class":f["class"]}),e.dom.setStyles(i,{width:N(f.width),height:N(f.height)}),f.type&&i.nodeName.toLowerCase()!=f.type&&(i=o.rename(i,f.type)),m(i),f.align&&e.formatter.apply("align"+f.align,{},i),K(i),f.valign&&e.formatter.apply("valign"+f.valign,{},i)}),e.focus()})}var o=e.dom,O,f,s,u=[];if(u=e.dom.select("td.mce-item-selected,th.mce-item-selected"),O=e.dom.getParent(e.selection.getStart(),"td,th"),!u.length&&O&&u.push(O),O=O||u[0]){f={width:L(o.getStyle(O,"width")||o.getAttrib(O,"width")),height:L(o.getStyle(O,"height")||o.getAttrib(O,"height")),scope:o.getAttrib(O,"scope"),"class":o.getAttrib(O,"class")},f.type=O.nodeName.toLowerCase(),d("left center right".split(" "),function(i){e.formatter.matchNode(O,"align"+i)&&(f.align=i)}),d("top middle bottom".split(" "),function(i){e.formatter.matchNode(O,"valign"+i)&&(f.valign=i)}),e.settings.table_cell_class_list&&(s={name:"class",type:"listbox",label:"Class",values:M(e.settings.table_cell_class_list,function(i){i.value&&(i.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[i.value]})})})});var l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},s]};e.settings.table_cell_adv_tab!==!1?(t(o,f,O),e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:f,body:[{title:"General",type:"form",items:l},h(o)],onsubmit:r})):e.windowManager.open({title:"Cell properties",data:f,items:l,onsubmit:r})}},g.row=function(){function Q(){var p,R,i;v(o,this),s=c.extend(s,this.toJSON()),e.undoManager.transact(function(){var S=s.type;d(P,function(T){e.dom.setAttribs(T,{scope:s.scope,style:s.style,"class":s["class"]}),e.dom.setStyles(T,{height:N(s.height)}),S!=T.parentNode.nodeName.toLowerCase()&&(p=o.getParent(T,"table"),R=T.parentNode,i=o.select(S,p)[0],i||(i=o.create(S),p.firstChild?p.insertBefore(i,p.firstChild):p.appendChild(i)),i.appendChild(T),R.hasChildNodes()||o.remove(R)),m(T),s.align&&e.formatter.apply("align"+s.align,{},T)}),e.focus()})}var o=e.dom,u,f,l,r,s,P=[],O;u=e.dom.getParent(e.selection.getStart(),"table"),f=e.dom.getParent(e.selection.getStart(),"td,th"),d(u.rows,function(i){d(i.cells,function(p){return o.hasClass(p,"mce-item-selected")||p==f?(P.push(i),!1):void 0})}),l=P[0],l&&(s={height:L(o.getStyle(l,"height")||o.getAttrib(l,"height")),scope:o.getAttrib(l,"scope"),"class":o.getAttrib(l,"class")},s.type=l.parentNode.nodeName.toLowerCase(),d("left center right".split(" "),function(i){e.formatter.matchNode(l,"align"+i)&&(s.align=i)}),e.settings.table_row_class_list&&(r={name:"class",type:"listbox",label:"Class",values:M(e.settings.table_row_class_list,function(i){i.value&&(i.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[i.value]})})})}),O={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},r]},e.settings.table_row_adv_tab!==!1?(t(o,s,l),e.windowManager.open({title:"Row properties",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:O},h(o)],onsubmit:Q})):e.windowManager.open({title:"Row properties",data:s,body:O,onsubmit:Q}))}}}),w(E,[B,H,x,D,I,A,j,b],function(p,K,g,d,m,f,v,L){function h(r){function c(i){return function(){r.execCommand(i)}}function R(T,i){var V,S,U,l;for(U='<table id="__mce"><tbody>',V=0;i>V;V++){for(U+="<tr>",S=0;T>S;S++){U+="<td>"+(v.ie?" ":"<br>")+"</td>"}U+="</tr>"}return U+="</tbody></table>",r.undoManager.transact(function(){r.insertContent(U),l=r.dom.get("__mce"),r.dom.setAttrib(l,"id",null),r.dom.setAttribs(l,r.settings.table_default_attributes||{}),r.dom.setStyles(l,r.settings.table_default_styles||{})}),l}function n(l,i){function o(){l.disabled(!r.dom.getParent(r.selection.getStart(),i)),r.selection.selectorChanged(i,function(s){l.disabled(!s)})}r.initialized?o():r.on("init",o)}function Q(){n(this,"table")}function O(){n(this,"td,th")}function N(){var l="";l='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var i=0;10>i;i++){l+="<tr>";for(var o=0;10>o;o++){l+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*i+o)+'" href="#" data-mce-x="'+o+'" data-mce-y="'+i+'"></a></td>'}l+="</tr>"}return l+="</table>",l+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function a(V,Z,T){var i=T.getEl().getElementsByTagName("table")[0],S,X,aa,U,W,Y=T.isRtl()||"tl-tr"==T.parent().rel;for(i.nextSibling.innerHTML=V+1+" x "+(Z+1),Y&&(V=9-V),X=0;10>X;X++){for(S=0;10>S;S++){U=i.rows[X].childNodes[S].firstChild,W=(Y?S>=V:V>=S)&&Z>=X,r.dom.toggleClass(U,"mce-active",W),W&&(aa=U)}}return aa.parentNode}var e,t=this,M=new d(r);r.settings.table_grid===!1?r.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:M.table}):r.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(i){i.aria&&(this.parent().hideAll(),i.stopImmediatePropagation(),M.table())},onshow:function(){a(0,0,this.menu.items()[0])},onhide:function(){var i=this.menu.items()[0].getEl().getElementsByTagName("a");r.dom.removeClass(i,"mce-active"),r.dom.addClass(i[0],"mce-active")},menu:[{type:"container",html:N(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(o){var i=o.target,s,l;"A"==i.tagName.toUpperCase()&&(s=parseInt(i.getAttribute("data-mce-x"),10),l=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(s=9-s),(s!==this.lastX||l!==this.lastY)&&(a(s,l,o.control),this.lastX=s,this.lastY=l))},onclick:function(l){var i=this;"A"==l.target.tagName.toUpperCase()&&(l.preventDefault(),l.stopPropagation(),i.parent().cancel(),r.undoManager.transact(function(){R(i.lastX+1,i.lastY+1)}),r.addVisual())}}]}),r.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:Q,onclick:M.tableProps}),r.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:Q,cmd:"mceTableDelete"}),r.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:c("mceTableCellProps"),onPostRender:O},{text:"Merge cells",onclick:c("mceTableMergeCells"),onPostRender:O},{text:"Split cell",onclick:c("mceTableSplitCells"),onPostRender:O}]}),r.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:c("mceTableInsertRowBefore"),onPostRender:O},{text:"Insert row after",onclick:c("mceTableInsertRowAfter"),onPostRender:O},{text:"Delete row",onclick:c("mceTableDeleteRow"),onPostRender:O},{text:"Row properties",onclick:c("mceTableRowProps"),onPostRender:O},{text:"-"},{text:"Cut row",onclick:c("mceTableCutRow"),onPostRender:O},{text:"Copy row",onclick:c("mceTableCopyRow"),onPostRender:O},{text:"Paste row before",onclick:c("mceTablePasteRowBefore"),onPostRender:O},{text:"Paste row after",onclick:c("mceTablePasteRowAfter"),onPostRender:O}]}),r.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:c("mceTableInsertColBefore"),onPostRender:O},{text:"Insert column after",onclick:c("mceTableInsertColAfter"),onPostRender:O},{text:"Delete column",onclick:c("mceTableDeleteCol"),onPostRender:O}]});var P=[];u("inserttable tableprops deletetable | cell row column".split(" "),function(i){P.push("|"==i?{text:"-"}:r.menuItems[i])}),r.addButton("table",{type:"menubutton",title:"Table",menu:P}),v.isIE||r.on("click",function(i){i=i.target,"TABLE"===i.nodeName&&(r.selection.select(i),r.nodeChanged())}),t.quirks=new K(r),r.on("Init",function(){t.cellSelection=new g(r)}),u({mceTableSplitCells:function(i){i.split()},mceTableMergeCells:function(l){var i;i=r.dom.getParent(r.selection.getStart(),"th,td"),r.dom.select("td.mce-item-selected,th.mce-item-selected").length?l.merge():M.merge(l,i)},mceTableInsertRowBefore:function(i){i.insertRow(!0)},mceTableInsertRowAfter:function(i){i.insertRow()},mceTableInsertColBefore:function(i){i.insertCol(!0)},mceTableInsertColAfter:function(i){i.insertCol()},mceTableDeleteCol:function(i){i.deleteCols()},mceTableDeleteRow:function(i){i.deleteRows()},mceTableCutRow:function(i){e=i.cutRows()},mceTableCopyRow:function(i){e=i.copyRows()},mceTablePasteRowBefore:function(i){i.pasteRows(e,!0)},mceTablePasteRowAfter:function(i){i.pasteRows(e)},mceTableDelete:function(i){i.deleteTable()}},function(i,l){r.addCommand(l,function(){var o=new p(r);o&&(i(o),r.execCommand("mceRepaint"),t.cellSelection.clear())})}),u({mceInsertTable:M.table,mceTableProps:function(){M.table(!0)},mceTableRowProps:M.row,mceTableCellProps:M.cell},function(l,i){r.addCommand(i,function(o,s){l(s)})}),r.settings.table_tab_navigation!==!1&&r.on("keydown",function(i){var S,l,s;9==i.keyCode&&(S=r.dom.getParent(r.selection.getStart(),"th,td"),S&&(i.preventDefault(),l=new p(r),s=i.shiftKey?-1:1,r.undoManager.transact(function(){!l.moveRelIdx(S,s)&&s>0&&(l.insertRow(),l.refresh(),l.moveRelIdx(S,s))})))}),t.insertTable=R}var u=m.each;L.add("table",h)}),J([])}(this);