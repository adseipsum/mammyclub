tinymce.PluginManager.add("autoresize",function(f){function d(){return f.plugins.fullscreen&&f.plugins.fullscreen.isFullscreen()}function c(i){var a,B,q,j,k,v,A,n,t,w,z,e,x=tinymce.DOM;if(B=f.getDoc()){if(q=B.body,j=B.documentElement,k=h.autoresize_min_height,!q||i&&"setcontent"===i.type&&i.initial||d()){return void (q&&j&&(q.style.overflowY="auto",j.style.overflowY="auto"))}A=f.dom.getStyle(q,"margin-top",!0),n=f.dom.getStyle(q,"margin-bottom",!0),t=f.dom.getStyle(q,"padding-top",!0),w=f.dom.getStyle(q,"padding-bottom",!0),z=f.dom.getStyle(q,"border-top-width",!0),e=f.dom.getStyle(q,"border-bottom-width",!0),v=q.offsetHeight+parseInt(A,10)+parseInt(n,10)+parseInt(t,10)+parseInt(w,10)+parseInt(z,10)+parseInt(e,10),(isNaN(v)||0>=v)&&(v=tinymce.Env.ie?q.scrollHeight:tinymce.Env.webkit&&0===q.clientHeight?0:q.offsetHeight),v>h.autoresize_min_height&&(k=v),h.autoresize_max_height&&v>h.autoresize_max_height?(k=h.autoresize_max_height,q.style.overflowY="auto",j.style.overflowY="auto"):(q.style.overflowY="hidden",j.style.overflowY="hidden",q.scrollTop=0),k!==b&&(a=k-b,x.setStyle(f.iframeElement,"height",k+"px"),b=k,tinymce.isWebKit&&0>a&&c(i))}}function g(i,a,j){setTimeout(function(){c({}),i--?g(i,a,j):j&&j()},a)}var h=f.settings,b=0;f.settings.inline||(h.autoresize_min_height=parseInt(f.getParam("autoresize_min_height",f.getElement().offsetHeight),10),h.autoresize_max_height=parseInt(f.getParam("autoresize_max_height",0),10),f.on("init",function(){var a=f.getParam("autoresize_overflow_padding",1);f.dom.setStyles(f.getBody(),{paddingBottom:f.getParam("autoresize_bottom_margin",50),paddingLeft:a,paddingRight:a})}),f.on("nodechange setcontent keyup FullscreenStateChanged",c),f.getParam("autoresize_on_init",!0)&&f.on("init",function(){g(20,100,function(){g(5,1000)})}),f.addCommand("mceAutoResize",c))});