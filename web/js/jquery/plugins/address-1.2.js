(function(a){a.address=(function(){var d=function(i){a(a.address).trigger(a.extend(a.Event(i),(function(){var ao={},an=a.address.parameterNames();for(var am=0,al=an.length;am<al;am++){ao[an[am]]=a.address.parameter(an[am])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:an,parameters:ao,queryString:a.address.queryString()}}).call(a.address)))},l=function(am,al,i){a(a.address).bind(am,al,a.isFunction(i)?i:function(){});return a.address},X=function(){var i=Y.href.indexOf("#");return i!=-1?ak(s(F(Y.href.substr(i+1),ad))):""},b=function(){try{return top.document!==undefined?top:window}catch(i){return window}},o=function(){return"javascript"},ai=function(al,i){if(G.strict){al=i?(al.substr(0,1)!="/"?"/"+al:al):(al==""?"/":al)}return al},T=function(i,al){return(j&&Y.protocol=="file:")?(al?V.replace(/\?/,"%3F"):V.replace(/%253F/,"?")):i},F=function(i,al){if(G.crawlable&&al){return(i!=""?"!":"")+i}return i.replace(/^\!/,"")},S=function(i,al){return parseInt(i.css(al),10)},m=function(ap){var am,ao;for(var an=0,al=ap.childNodes.length;an<al;an++){if(ap.childNodes[an].src){am=String(ap.childNodes[an].src)}ao=m(ap.childNodes[an]);if(ao){am=ao}}return am},ab=function(){if(!v){var al=X(),i=V!=al;if(x&&t<523){if(I!=ac.length){I=ac.length;if(typeof C[I-1]!=K){V=C[I-1]}Z(ad)}}else{if(j&&t<7&&i){Y.reload()}else{if(i){V=al;Z(ad)}}}}},Z=function(i){d(J);d(i?h:ah);q(y,10)},y=function(){var al=(Y.pathname+(/\/$/.test(Y.pathname)?"":"/")+(a.address?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,""),i=Q[G.tracker];if(typeof i==g){i(al)}else{if(typeof urchinTracker==g){urchinTracker(al)}else{if(typeof pageTracker!=K&&typeof pageTracker._trackPageview==g){pageTracker._trackPageview(al)}else{if(typeof _gaq!=K&&typeof _gaq.push==g){_gaq.push(["_trackPageview",al])}}}}},H=function(){var i=f.contentWindow.document;i.open();i.write("<html><head><title>"+af.title+"</title><script>var "+A+' = "'+X()+'";<\/script></head></html>');i.close()},R=function(){if(!W){W=E;var al=a("body").ajaxComplete(function(){u.call(this)}).trigger("ajaxComplete");if(G.wrap){var am=a("body > *").wrapAll('<div style="padding:'+(S(al,"marginTop")+S(al,"paddingTop"))+"px "+(S(al,"marginRight")+S(al,"paddingRight"))+"px "+(S(al,"marginBottom")+S(al,"paddingBottom"))+"px "+(S(al,"marginLeft")+S(al,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+A+'" style="height:100%; overflow:auto;'+(x?(window.statusbar.visible&&!/chrome/i.test(aj)?"":" resize:both;"):"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});if(x){a('<style type="text/css" />').appendTo("head").text("#"+A+"::-webkit-resizer { background-color: #fff; }")}}if(j&&t<8){var i=af.getElementsByTagName("frameset")[0];f=af.createElement((i?"":"i")+"frame");if(i){i.insertAdjacentElement("beforeEnd",f);i[i.cols?"cols":"rows"]+=",0";f.src=o()+":"+ad;f.noResize=E;f.frameBorder=f.frameSpacing=0}else{f.src=o()+":"+ad;f.style.display="none";af.body.insertAdjacentElement("afterBegin",f)}q(function(){a(f).bind("load",function(){var an=f.contentWindow;var ao=an.location.href;V=(typeof an[A]!=K?an[A]:"");if(V!=X()){Z(ad);Y.hash=T(F(V,E),E)}});if(typeof f.contentWindow[A]==K){H()}},50)}else{if(x){if(t<418){a(af.body).append('<form id="'+A+'" style="position:absolute;top:-9999px;" method="get"></form>');M=af.getElementById(A)}if(typeof Y[A]==K){Y[A]={}}if(typeof Y[A][Y.pathname]!=K){C=Y[A][Y.pathname].split(",")}}}q(function(){d("init");Z(ad)},1);if((j&&t>7)||(!j&&("on"+U) in Q)){if(Q.addEventListener){Q.addEventListener(U,ab,false)}else{if(Q.attachEvent){Q.attachEvent("on"+U,ab)}}}else{w(ab,50)}a("a").filter("[rel*=address:]").address()}},r=function(){if(Q.removeEventListener){Q.removeEventListener(U,ab,false)}else{if(Q.detachEvent){Q.detachEvent("on"+U,ab)}}},u=function(){var al=Y.pathname.replace(/\/$/,""),i="_escaped_fragment_";a("a:not([href^=http])",this).each(function(){if(a(this).attr("href")){var am=a(this).attr("href").replace(new RegExp(al+"/?$"),"");if(am==""||am.indexOf(i)!=-1){a(this).attr("href","#"+decodeURIComponent(am.replace(new RegExp("/(.*)\\?"+i+"=(.*)$"),"!$2")))}}})},A="jQueryAddress",g="function",K="undefined",U="hashchange",p="init",J="change",h="internalChange",ah="externalChange",E=true,ad=false,G={autoUpdate:E,crawlable:ad,history:E,strict:E,wrap:ad},D=a.browser,t=parseFloat(a.browser.version),ae=D.mozilla,j=D.msie,O=D.opera,x=D.safari,ag=ad,Q=b(),af=Q.document,ac=Q.history,Y=Q.location,w=setInterval,q=setTimeout,s=decodeURI,ak=encodeURI,aj=navigator.userAgent,f,M,k=m(document),c=k?k.indexOf("?"):-1,L=af.title,I=ac.length,v=ad,W=ad,P=E,N=E,z=ad,C=[],B={},V=X();if(j){t=parseFloat(aj.substr(aj.indexOf("MSIE")+4));if(af.documentMode&&af.documentMode!=t){t=af.documentMode!=8?7:8}a(document).bind("propertychange",function(){if(af.title!=L&&af.title.indexOf("#"+X())!=-1){af.title=L}})}ag=(ae&&t>=1)||(j&&t>=6)||(O&&t>=9.5)||(x&&t>=312);if(ag){for(var aa=1;aa<I;aa++){C.push("")}C.push(V);if(j&&Y.hash!=V){Y.hash="#"+T(F(V,E),E)}if(O){history.navigationMode="compatible"}if(k&&c!=-1){var n,e=k.substr(c+1).split("&");for(aa=0;aa<e.length;aa++){n=e[aa].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(n[0])){G[n[0]]=(isNaN(n[1])?/^(true|yes)$/i.test(n[1]):(parseInt(n[1],10)!==0))}if(/^tracker$/.test(n[0])){G[n[0]]=n[1]}}}if(document.readyState=="complete"){R()}a(R);a(window).bind("unload",r)}else{if((!ag&&X()!="")||(x&&t<418&&X()!=""&&Y.search!="")){af.open();af.write('<html><head><meta http-equiv="refresh" content="0;url='+encodeURI(Y.href.substr(0,Y.href.indexOf("#")))+'" /></head></html>');af.close()}else{y()}}return{bind:function(al,am,i){return l(al,am,i)},init:function(i){return l(p,i)},change:function(i){return l(J,i)},internalChange:function(i){return l(h,i)},externalChange:function(i){return l(ah,i)},baseURL:function(){var i=Y.href;if(i.indexOf("#")!=-1){i=i.substr(0,i.indexOf("#"))}if(/\/$/.test(i)){i=i.substr(0,i.length-1)}return i},autoUpdate:function(i){if(i!==undefined){G.autoUpdate=i;return this}return G.autoUpdate},crawlable:function(i){if(i!==undefined){G.crawlable=i;return this}return G.crawlable},history:function(i){if(i!==undefined){G.history=i;return this}return G.history},strict:function(i){if(i!==undefined){G.strict=i;return this}return G.strict},tracker:function(i){if(i!==undefined){G.tracker=i;return this}return G.tracker},wrap:function(i){if(i!==undefined){G.wrap=i;return this}return G.wrap},update:function(){z=E;this.value(V);z=ad;return this},title:function(i){if(i!==undefined){i=s(i);q(function(){L=af.title=i;if(N&&f&&f.contentWindow&&f.contentWindow.document){f.contentWindow.document.title=i;N=ad}if(!P&&ae){Y.replace(Y.href.indexOf("#")!=-1?Y.href:Y.href+"#")}P=ad},50);return this}return af.title},value:function(am){if(am!==undefined){am=ak(s(ai(am,E)));if(am=="/"){am=""}if(V==am&&!z){return}P=E;V=am;if(G.autoUpdate||z){v=E;Z(E);C[ac.length]=V;if(x){if(G.history){Y[A][Y.pathname]=C.toString();I=ac.length+1;if(t<418){if(Y.search==""){M.action="#"+F(V,E);M.submit()}}else{if(t<523||V==""){var i=af.createEvent("MouseEvents");i.initEvent("click",E,E);var al=af.createElement("a");al.href="#"+F(V,E);al.dispatchEvent(i)}else{Y.hash="#"+F(V,E)}}}else{Y.replace("#"+F(V,E))}}else{if(V!=X()){if(G.history){Y.hash="#"+T(F(V,E),E)}else{Y.replace("#"+F(V,E))}}}if((j&&t<8)&&G.history){q(H,50)}if(x){q(function(){v=ad},1)}else{v=ad}}return this}if(!ag){return null}return s(ai(T(V,ad),ad))},path:function(al){if(al!==undefined){var i=this.queryString(),am=this.hash();this.value(al+(i?"?"+i:"")+(am?"#"+am:""));return this}return this.value().split("#")[0].split("?")[0]},queryString:function(al){if(al!==undefined){var am=this.hash();this.value(this.path()+(al?"?"+al:"")+(am?"#"+am:""));return this}var i=this.value().split("?");return i.slice(1,i.length).join("?").split("#")[0]},parameter:function(am,av,ao){var at,aq;if(av!==undefined){var au=this.parameterNames();aq=[];for(at=0;at<au.length;at++){var ap=au[at],aw=this.parameter(ap);if(typeof aw=="string"){aw=[aw]}if(ap==am){aw=(av===null||av=="")?[]:(ao?aw.concat([av]):[av])}for(var ar=0;ar<aw.length;ar++){aq.push(ap+"="+aw[ar])}}if(a.inArray(am,au)==-1&&av!==null&&av!=""){aq.push(am+"="+av)}this.queryString(aq.join("&"));return this}av=this.queryString();if(av){aq=av.split("&");var al=[];for(at=0;at<aq.length;at++){var an=aq[at].split("=");if(an[0]==am){al.push(an[1])}}if(al.length!==0){return al.length!=1?al:al[0]}}},pathNames:function(){var al=this.path(),i=al.replace(/\/{2,9}/g,"/").split("/");if(al.substr(0,1)=="/"||al.length===0){i.splice(0,1)}if(al.substr(al.length-1,1)=="/"){i.splice(i.length-1,1)}return i},parameterNames:function(){var al=this.queryString(),ao=[];if(al&&al.indexOf("=")!=-1){var ap=al.split("&");for(var an=0;an<ap.length;an++){var am=ap[an].split("=")[0];if(a.inArray(am,ao)==-1){ao.push(am)}}}return ao},hash:function(al){if(al!==undefined){this.value(this.value().split("#")[0]+(al?"#"+al:""));return this}var i=this.value().split("#");return i.slice(1,i.length).join("#")}}})();a.fn.address=function(b){if(this.selector!="form"){var c=function(){if(a(this).is("a")){var d=b?b.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:a(this).attr("href").replace(/^#\!?/,"");if(d!=false){a.address.value(d);return false}}};a(this).click(c).live("click",c)}else{this.each(function(){a(this).submit(function(){if(a(this).is("form")){var d=b?b.call(this):a(this).attr("action")+"?"+a(this).serialize();a.address.value(d);return false}})})}return this}}(jQuery));