(function(a){a.fn.autogrow=function(b){this.filter("textarea").each(function(){var e=a(this),d=e.height(),c=e.css("lineHeight");var g=a("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:a(this).width()-parseInt(e.css("paddingLeft"))-parseInt(e.css("paddingRight")),fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),lineHeight:e.css("lineHeight"),resize:"none"}).appendTo(document.body);var f=function(i,h){var k=function(l,o){for(var m=0,n="";m<o;m++){n+=l}return n};var j=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(l){return k("&nbsp;",l.length-1)+" "});g.html(j);a(this).css("height",Math.max(g.height()+15,d));a.data(this,"autogrow_shadow",g)};a(this).change(f).keyup(f).keydown(f);f.call(this,null,true)});return this};a.fn.destroyAutogrow=function(){this.filter("textarea").each(function(){a.data(this,"autogrow_shadow").remove();a(this).unbind("change").unbind("keyup").unbind("keydown");a(this).removeAttr("style")})}})(jQuery);